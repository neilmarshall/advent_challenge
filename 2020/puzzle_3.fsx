let data = """
    .....#.##......#..##..........#
    ##.#.##..#............##....#..
    ......###...#..............#.##
    .....#..##.#..#......#.#.#..#..
    ..#.......###..#..........#.#..
    ..#..#.##.......##.....#....#..
    .##....##....##.###.....###..#.
    ..##....#...##..#....#.#.#.....
    .....##..###.##...............#
    #.....#..#....#.##...####..#...
    #......#.#....#..#.##....#..#.#
    ##.#...#.#............#......#.
    .#####.......#..#.#....#......#
    ..#.#....#.#.##...#.##...##....
    .....#.#...#..####.##..#.......
    #....#...##.#.#.##.#..##.....#.
    ##.##...#....#...#......#..##..
    ....##...#..#.#...#.#.#.....##.
    ..#....##......##....#.#....#..
    #..#....#....###..#.##....#.#.#
    ..#.#####..##....#....#.....##.
    .#...##.......#...#....#.#...##
    #.#.#.##.......#.....#.#.#....#
    .#.#.....#.......#.......##....
    .#......#....#....#.......##...
    #......#.....#......#..#..#....
    #.#...#...#....##....#.#...#..#
    ....#.....##...#...#..#.#......
    ..#......#..........#...#.#....
    ..#..#......####..##...###.....
    .#.....#...##...#.##........###
    #.#....#..#....#..#.....#.#..#.
    ...##.##.#.#.##...#.....#......
    ##....#.#.#...####.#.#.#.#.....
    .##.........#..#..###..........
    ..##.###.#..#..#....##.....#...
    ##........#..###....#.#..#..#..
    ....#.#.......##..#.#.#.#......
    ....##.....#.........##.......#
    ..#........##.#.........###..##
    ....#..................##..#...
    #...#.#..###..#.....#..#..#...#
    ..#..#.##..#..#.......#.......#
    .....#..##..#....##...........#
    ..##...#........#...#.#.......#
    .........#.#..#.#..#.##.#.###..
    ....#...#..#..#......##....#.#.
    ..#..#.#....#....#..#.####..##.
    ##....#.....#......##.###.#..#.
    #..#..##..###......#.#.#.#...#.
    .......#..##..##...#...#..#....
    ..#.###.#...#....#.##.#.....##.
    .#.#.......##...##...##....#...
    #...#.#.#...#.####..#..##......
    ###..#.##..#..........#...#....
    ##.#.........#..##......####...
    ..##.#..#....#.##..............
    ...#....#.......###............
    ...#.....##....#.#.#.#.......##
    ###.###...#...#...###.##...##..
    #.#....#.##..#.....#.....##.#..
    ...#....#....#.........#....#.#
    ##.#....#........#..#..##.#....
    .#.#..#.......#...##.......#...
    .##...##........#....#.#..#....
    ....#..#.##.###.....#.#........
    .#.#...#.#..#.....#.........#..
    .......#.#.#..##....#.........#
    .##...#....#..#...#........#..#
    ....#....#..#.#..#.#.#....##.##
    ..##....#.....##..#.#...#...#..
    #.##.........#.....#.......#.##
    ...#...##.#.#..........#......#
    ###...#.....#..#.......#####..#
    #.####...##.#.#..#...#.........
    .##.....#.....##..#...##.##....
    .........###...#......##....###
    .#....##...###.#..#...##..#.#.#
    .......#.......#.#...##.#......
    .....#.#........#..##.....##...
    ....#.#.........##.#...##..#.#.
    #..#..#.##..#.##.##.....##.###.
    ..##.........###...#....#....#.
    .###...#..#.##...........#.....
    #..##..........#..........#....
    .....#.#....#..##..#...#.#....#
    ..#.....#.#....#...##.##.......
    ##.....##........#....#..##....
    .#..#.#.........#..#..#........
    .............##....#....#..#...
    ....##....#..#.#.##....###.##.#
    .###..#.....#..#..##..#..##..#.
    ...#..###.......#.#....#..###..
    #.#..#.....#...#......#........
    #..#..............###.#......#.
    ..#....##.#....#.##.#.#...#....
    .........##..#...#.#.......#...
    ........#...#.#....#.....##..#.
    ...#.##..#..#..###..#..#......#
    .....####......#...#....#...#.#
    ...###.#.#......#....#.......#.
    #...##.#....#....##....##.###..
    .......##...##.....#.##.#..#..#
    .....#.#............##...#.####
    .##..#.#.#.#..#.#.#.....#.##...
    .#..####...#.#....#.....#..#...
    ....##..#.#...#..#....#.#......
    ...#......###..#..###..#.....#.
    .#.#.#..##....#...##..#.....#..
    ###....#....#...##.....#...#...
    #.##....#......#...###.........
    .#..#.#...#..#....#....#....#..
    ...............##...####..#..#.
    #.#...........####..#...##.....
    ##.#....#........#......#...##.
    ......#...#...#....#....#.....#
    #......#.............#....###..
    .#...#...##.....#...##.##..#...
    ..#.#......#.#........#........
    .......#..#.#...##..#.#.#......
    ..##...#.##........#....#.#...#
    .....#..#..#........#.#......##
    ....#.#...##............##....#
    .#.#....#.#.#...#...#.##.....#.
    #.#.##...#....#.#.#..#.##..#.#.
    .........####..#...#...#.......
    #..#..####......#..##..#...#...
    .........##..................#.
    .....##.#..##.#.#...#......##..
    ...#....#....#.#.....#...#..#.#
    #...##.#...##...........#..#...
    #..........#.#..#..#.##..#..#.#
    .#...#.##...#.#.#..#.......##..
    .........#...........#..#..#...
    .##...##....#.#......#........#
    #.#...........#....#.......#...
    ##.#.#.......#...###......##..#
    ...###..#.##..##.#.#.......#...
    .#...#..##.#...#........#.....#
    ...#.......#..#..........#.#...
    ..#.#.#.#.....#.#.......#..#..#
    #.##.....#..##...#..###.#....#.
    .......#...........#...#....###
    .......#..#...#.............#..
    #.....###.......#...#........#.
    .#..#..#..#...........#........
    ....#.#...#.#.##.#.#....#.##..#
    .......#..##...##...#...#......
    ...#.....##.###...#.#...##....#
    #..#....#...##......#....##....
    #.#.......#....#.###.##..#..#..
    ..##...........#...#....#......
    .#........#.....#..#..#...#..##
    .....#.#.#..#.......#....#.....
    #..#.#......#......##....#.....
    ##.....................##......
    .##........###..#.........#...#
    ........#.........#..#.........
    .#.##....#.....#...#.........##
    ....##......#.........#........
    ...#.#..#...##.##.#.#..####....
    ..##...........##.#.#....#.....
    .#.....#.#...#..#.......#....#.
    ....#...#......##...#...##.#..#
    ....#..##....#..#.........##.#.
    ..##...##.##....#....##.###...#
    ..#....##..##.#.#.#...#......#.
    ##...#.........#...........#...
    .##....##.#.....#...#.......#..
    ..........##.###.##....###....#
    ..........#..##..#....#.#.##.##
    ........##.#...#.#.#.#...###.#.
    .#......#.#.#...###.#.#.#......
    .........#......#......#...#..#
    ......#.....#.##....##.#####..#
    ..#..##...###.#..........#.#.#.
    .#..#....###.#...#..#....#...##
    ...................#..........#
    ....###.....#...##......#.....#
    #.....#..##.....#.#..........#.
    ..#.......##.#....#..#.##.#...#
    ........##.#..###..#......##...
    #...........##.#...###..#....#.
    ....#...........#.....#.#...#..
    .##..#.#...#...#.##...#..#.....
    #........#.#.#.#.#.#...........
    #..#.....#..#..#.##....#....#.#
    ..#............##....#.#.##...#
    .....###.#....#.#......#.###...
    ...#.....#.#.................#.
    ..#...##..#.#...#...#...#.....#
    .##.#........#..#....##..#..##.
    .#..........#...#.#..#..#.#....
    #.......##.........#.##..#.####
    .#..............#.......##.....
    #......#.##..........#..#......
    ..##...#...#.#...#............#
    .##.##..##..##........##.....#.
    .....#..#.....##...............
    .#..#...##...#...#.....#.......
    #......#...#.......#..##.###.##
    ###..##......##......###....#..
    ....#..........#...#.##.#.....#
    .........#....#..#..#.#..##....
    .....#.....#...........#......#
    .#.......#...#....##...#.##...#
    ..##.#..............#..#...#.#.
    .#..####.#.........#....#....#.
    ..###.#...#..#......#.......###
    .#.#..##...###...#...#.#...#.#.
    ...#..##..###.#..#.....#.##....
    #...###.#...##.....####.....#..
    .#.##...#..#.#..##.....#.......
    ...#.##.....##.....#....#......
    .#...##.....#..###..#..........
    ..........#...#.....#....##.#..
    .......#...#...#...#........#..
    #....##..#...#..##.#.#.....#...
    .#.#..............#..#....#....
    .####.#.#.###......#...#.#....#
    .#...#...##.#...............#.#
    ...#.......##...#...#....##....
    #..........###.##..........##.#
    .......#...#....#.#..#.#....#..
    ....#.##.#...###..#..##.##.....
    ..#.#.#......#.#.......###.....
    #..................#.##....#...
    #.....#..#.#.#..#...#.........#
    ..#..#...#.#.##........#.......
    #..#.#..#..........###...#.#...
    .......#.##....#........##.#...
    .####.#.#...#.#...##.##.....###
    ........#.#...#.#..##...##.....
    ....##.##......#.##.........#..
    .#..#...#.#...........#........
    .......#..........#....#...#...
    ..###.#.###..#..#.....#..##....
    .#..........#.......##...#.....
    .#.....#...#........#...#.##..#
    .#..#.......#..#.......#.#.#...
    ....#..##.#...##...#.#....#....
    .....#.........#..#..#....#....
    ..#.#..##....#..#..##.#.#.....#
    ........#.#...###....#.#.#.....
    .#.....#.......#..###.#........
    .......#...#.#...#...##........
    ##.............#.#.....#.#..#..
    .#....#.......#.#.......#..##..
    #.....#........#..##..##.......
    ...........#.........###......#
    ....#.##...#.#...#...#....#..##
    ......#..##......#......#.##.#.
    ......##....####...###...#.....
    #....#..........#.#.##.....#..#
    ....#.#...........#.#.#.#.#...#
    ....####.....##...#..##..#...#.
    #....#.###..###.....#..###.....
    ..##.........#......#...##.#...
    ..#.....#.#...#.##.#...#..###.#
    ..#.##..##........#.......#.###
    .....#..........#.....#....#...
    .......##..##..###.......#####.
    ..###......#.#....###....##...#
    #..##.....#..###...#.....##.##.
    #..#..##.##.###.####.##.#......
    .#.#......#.##......#..#......#
    ..###.....#.#......#.#.####....
    #..............#..#.#...#.###..
    ...#..#.##..........##.#...#.##
    .#.#.#.........#....#.#..#.....
    ..#.##..#...#..#...#......#....
    .......#...#.##.#.#..#...##..#.
    ..........#.####...#........#.#
    ....#...#....##.#.........#.#..
    ##.#..#.......###....#..#..#.#.
    ..##.....#..#.#.#.####......#..
    .#.....#..........#..#..#.#....
    ......#.#.......#.#...#..#..#..
    ...#...............#....#...#..
    ##.......#.........#.......#...
    ...#.......###...#.#...#.......
    #...###....#....##....#....#...
    ...#....##..#.#.............##.
    .....#.#.#..#......#...#.#..#..
    .##....#..##..#####..##.....##.
    ....##.#.#..#.....#.#...#......
    ...#.....##.#.#..##..#.#.......
    .......#..#..#..........#......
    .......#...#..#.........#.##...
    ..#..#..#...##..#.#....#......#
    ..#....#...#.#......#........#.
    .#...#..#...#.#..........#.....
    #..#...####..#......##.##.#.#..
    .#...#.#...#.#.....#..##.#.....
    ..#.##.#......#.........##...#.
    ###..............#.............
    ...#...###....#..#.............
    .##....#......#..#.....#..#..#.
    .#..........#.....##...#..#....
    ....##..#.#......###.##......#.
    .#..##.#.##.#...##.#......###.#
    #..###.#...###..#........#.#...
    #..#.#.#..#...###.##.##..#..#..
    #.#..#....#.........##......#..
    ....###.....###....#...........
    ....#..##.##....##..#.....#....
    .#.....#....####...#..##.#..###
    .........##..#......#.#...##...
    .##.......#.....#.###.#..#.#..#
    .....#.#...###.....#......####.
    ##.#...#......#.#.#..#.####...#
    .#.##.....#..#..#.............#
    .#..###..#..#......#..##......#
    .......#.#........##.....#.#...
    #....#...#..###..#.#.....#.##..
    .##.....#.#....###..#.....##...
    ...##....#....#...#....#.#.#...
    #####..#...........###....#...#
    .#.......##.##.....#....#......
    .#..#.#...#..#......#...#..#.#.
    ....#.....##...#####..#...#...#
    ###.##...#.#............#....#.
    .....#...#........##.........#.
    """

let countTrees data (r, c) =
    let rec countTrees' data x y acc =
        match data with
        | [] -> acc
        | [head] -> acc + if Array.item (y % Array.length head) head = '#' then 1 else 0
        | head::_ -> countTrees' (List.skip r data) (x + r)  (y + c) (acc + if Array.item (y % Array.length head) head = '#' then 1 else 0)
    countTrees' data 0 0 0

let data' = [for row in data.Trim().Split('\n') -> row.Trim().ToCharArray()]
countTrees data' (1, 3)  // should be 276
[(1, 1); (1, 3); (1, 5); (1, 7); (2, 1)] |> List.map (countTrees data') |> List.map int64 |> List.reduce (*) |> printfn "%d"  // should be 7812180000
